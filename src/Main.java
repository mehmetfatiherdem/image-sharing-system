import helper.security.Authentication;
import helper.security.Confidentiality;
import model.Server;

import java.net.BindException;
import java.security.NoSuchAlgorithmException;
import java.security.PublicKey;
import java.util.Arrays;

public class Main {
    public static void main(String[] args) throws Exception {
       ApplicationManager.getInstance().run();
/*
        Server server = Server.getInstance(1233);
        byte[] macKey = Authentication.generateMACKey();
        PublicKey serverPublicKey = Confidentiality.getPublicKeyFromByteArray(Confidentiality.getByteArrayFromPublicKey(server.getPublicKey()));
        String macKeyString = "MAC" + " " + "Secretmsg123!" + Arrays.toString(macKey);
        var encrypted = Confidentiality.encryptWithPublicKey(macKeyString.getBytes(), serverPublicKey);
        // mackey
        System.out.println("MAC key: " + Arrays.toString(macKey));
        System.out.println("Encrypted: " + Arrays.toString(encrypted));
        System.out.println("MAC generated by client: " + Arrays.toString(Authentication.generateMAC("Secretmsg123!".getBytes(), macKey)));

        byte[] decrypted = Confidentiality.decryptWithPrivateKey(encrypted, Confidentiality.getPrivateKeyFromByteArray(Confidentiality.getByteArrayFromPrivateKey(server.getKeyPair().getPrivate())));
        System.out.println("Decrypted: " + Arrays.toString(decrypted));
        System.out.println("MAC generated by server: " + Arrays.toString(Authentication.generateMAC("Secretmsg123!".getBytes(), macKey)));

 */
    }
}